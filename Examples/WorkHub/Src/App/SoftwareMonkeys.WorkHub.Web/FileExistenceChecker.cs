/*

====================================================================================================

This file as been imported by the Commander console and the 'Import files' script.

The source of the import is:
C:\Projects\SoftwareMonkeys\SiteStarter\Src\App\SoftwareMonkeys.SiteStarter.Web\FileExistenceChecker.cs

Do not edit this file or changes may be lost. Edit the source file and the changes will be imported by all projects that use it.

====================================================================================================


*/

using System;
using System.IO;
using SoftwareMonkeys.WorkHub.Diagnostics;
using SoftwareMonkeys.WorkHub.IO;
using SoftwareMonkeys.WorkHub.State;

namespace SoftwareMonkeys.WorkHub.Web
{
	/// <summary>
	///
	/// </summary>
	public class FileExistenceChecker
	{
		private string applicationPath = String.Empty;
		public string ApplicationPath
		{
			get {
				if (applicationPath == String.Empty)
					applicationPath = StateAccess.State.ApplicationPath;
				return applicationPath; }
			set { applicationPath = value; }
		}
		
		private IFileMapper fileMapper;
		public IFileMapper FileMapper
		{
			get {
				if (fileMapper == null)
					fileMapper = new FileMapper(ApplicationPath);
				return fileMapper; }
			set { fileMapper = value; }
		}
		
		public FileExistenceChecker()
		{
		}
		
		public virtual bool Exists(string relativeFilePath)
		{
			bool isReal = false;
			
			using (LogGroup logGroup = LogGroup.StartDebug("Checking whether the file exists: " + relativeFilePath))
			{
				string physicalFile = FileMapper.MapPath(relativeFilePath);
				
				LogWriter.Debug("Physical file: " + physicalFile);
				
				isReal = File.Exists(physicalFile);
				
				LogWriter.Debug("Is real? " + isReal.ToString());
			}
			return isReal;
		}
	}
}
